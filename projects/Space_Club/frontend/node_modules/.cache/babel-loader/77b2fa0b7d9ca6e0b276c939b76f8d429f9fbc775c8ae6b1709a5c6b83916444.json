{"ast":null,"code":"import _objectSpread from\"C:/Users/saiga/Desktop/FSD/projects/Space_Club/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/saiga/Desktop/FSD/projects/Space_Club/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Link,useNavigate}from\"react-router-dom\";import{useEffect,useRef,useState}from\"react\";import axios from\"axios\";import{Navigationhome}from\"./navigation copy\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Editprofile(){var setBackgroundImage=function setBackgroundImage(){document.querySelector('.backgroundimg').style.backgroundImage=\"url('http://localhost:5000/img/space1.webp')\";document.querySelector('.backgroundimg').style.backgroundSize=\"cover\";};setBackgroundImage();useEffect(function(){if(!localStorage.getItem('user')){alert('Please Login Your Account');window.location.href='/login';}},[]);var Nav=useNavigate();var id=localStorage.getItem('user');var _useState=useState([]),_useState2=_slicedToArray(_useState,2),databymail=_useState2[0],setdatabymail=_useState2[1];var imageref=useRef(null);var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),image=_useState4[0],setimage=_useState4[1];var changeimg=function changeimg(){imageref.current.click();};var _useState5=useState({'fname':'','lname':'','email':'','myimg':''}),_useState6=_slicedToArray(_useState5,2),editdata=_useState6[0],seteditdata=_useState6[1];useEffect(function(){var id=localStorage.getItem('email');console.log(id);axios.get(\"http://localhost:5000/getdata/\".concat(id)).then(function(response){var data=response.data.logindata;console.log(data);setdatabymail(data);seteditdata({'fname':data.fname,'lname':data.lname,'email':data.email,'myimg':''});});},[Nav,id]);var Savedata=function Savedata(){if(!editdata.myimg){axios.put(\"http://localhost:7416/editdata/\".concat(id),editdata).then(function(response){alert(response.data.msg);window.location.reload();});// alert(editdata.myimg)\n}else{var neweditdata=new FormData();neweditdata.append('fname',editdata.fname);neweditdata.append('lname',editdata.lname);neweditdata.append('email',editdata.email);neweditdata.append('myimg',editdata.myimg);axios.put(\"http://localhost:7416/editdataimg/\".concat(id),neweditdata).then(function(response){alert(response.data.msg);window.location.reload();});// alert(editdata.myimg)\n// console.log(editdata.myimg)\n}};var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isSidebarOpen=_useState8[0],setIsSidebarOpen=_useState8[1];var Gotologin=function Gotologin(){Nav('/logout');};var toggleSidebar=function toggleSidebar(){setIsSidebarOpen(!isSidebarOpen);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Navigationhome,{}),/*#__PURE__*/_jsxs(\"div\",{style:{paddingTop:'4%'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center'},children:[/*#__PURE__*/_jsx(Link,{to:'/editprofile',children:/*#__PURE__*/_jsx(\"button\",{style:{backgroundColor:'red'},id:\"navbtn\",children:\"EDIT PROFILE\"})}),/*#__PURE__*/_jsx(Link,{to:'/changepassword',children:/*#__PURE__*/_jsx(\"button\",{id:\"navbtn\",children:\"CHANGE PASSWORD\"})}),/*#__PURE__*/_jsx(Link,{to:'/deleteaccount',children:/*#__PURE__*/_jsx(\"button\",{id:\"navbtn\",children:\"DELETE ACCOUNT\"})})]}),/*#__PURE__*/_jsxs(\"div\",{id:\"loginblock\",style:{position:'relative',top:'80px',left:'900px',backgroundColor:' rgb(219, 208, 84)'},children:[/*#__PURE__*/_jsx(\"div\",{id:\"editimgdiv\",children:image?/*#__PURE__*/_jsx(\"img\",{onClick:changeimg,id:\"editimg\",src:URL.createObjectURL(image),alt:\"profile img\"}):/*#__PURE__*/_jsx(\"img\",{id:\"editimg\",onClick:changeimg,src:\"http://localhost:5000/profile/1708077067461_22P35A0384.jpg\",alt:\"profileImg\"})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{id:\"loginblock1\",value:editdata.fname,type:\"text\",placeholder:\"Enter Your First Name\",onChange:function onChange(e){return seteditdata(_objectSpread(_objectSpread({},editdata),{},{fname:e.target.value}));}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{id:\"loginblock1\",value:editdata.lname,type:\"text\",placeholder:\"Enter Your Last Name\",onChange:function onChange(e){return seteditdata(_objectSpread(_objectSpread({},editdata),{},{lname:e.target.value}));}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{id:\"loginblock1\",value:editdata.email,type:\"email\",placeholder:\"Enter Your Mail\",onChange:function onChange(e){return seteditdata(_objectSpread(_objectSpread({},editdata),{},{email:e.target.value}));}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{style:{display:'none'},className:\"fileinput\",type:\"file\",ref:imageref,onChange:function onChange(e){return seteditdata(_objectSpread(_objectSpread({},editdata),{},{myimg:e.target.files[0]}),setimage(e.target.files[0]));}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{id:\"loginbutton\",onClick:function onClick(){return Savedata();},children:\"SAVE\"})]})]})]});}export default Editprofile;","map":{"version":3,"names":["Link","useNavigate","useEffect","useRef","useState","axios","Navigationhome","Editprofile","setBackgroundImage","document","querySelector","style","backgroundImage","backgroundSize","localStorage","getItem","alert","window","location","href","Nav","id","databymail","setdatabymail","imageref","image","setimage","changeimg","current","click","editdata","seteditdata","console","log","get","then","response","data","logindata","fname","lname","email","Savedata","myimg","put","msg","reload","neweditdata","FormData","append","isSidebarOpen","setIsSidebarOpen","Gotologin","toggleSidebar","paddingTop","textAlign","backgroundColor","position","top","left","URL","createObjectURL","e","target","value","display","files"],"sources":["C:/Users/saiga/Desktop/FSD/projects/Space_Club/frontend/src/components/editprofile.jsx"],"sourcesContent":["import { Link ,useNavigate} from \"react-router-dom\";\r\nimport { useEffect,useRef,useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { Navigationhome } from \"./navigation copy\";\r\n\r\nfunction Editprofile(){\r\n    const setBackgroundImage = () => {\r\n        document.querySelector('.backgroundimg').style.backgroundImage = \"url('http://localhost:5000/img/space1.webp')\";\r\n        document.querySelector('.backgroundimg').style.backgroundSize = \"cover\";\r\n    };\r\n    setBackgroundImage();\r\n    useEffect(()=>{\r\n        if(!localStorage.getItem('user')){\r\n            alert('Please Login Your Account')\r\n            window.location.href='/login'\r\n        }\r\n    },[])\r\n    const Nav = useNavigate();\r\n    const id = localStorage.getItem('user');\r\n    const [databymail, setdatabymail] = useState([]);\r\n    const imageref = useRef(null)\r\n    const [image, setimage] = useState('');\r\n    const changeimg=()=>{\r\n        imageref.current.click();\r\n    }\r\n    const [editdata, seteditdata] = useState({\r\n        'fname': '',\r\n        'lname': '',\r\n        'email': '',\r\n        'myimg': ''\r\n    });\r\n\r\n    useEffect(() => {\r\n        const id = localStorage.getItem('email')\r\n        console.log(id)\r\n        axios.get(`http://localhost:5000/getdata/${id}`).then((response) => {\r\n            const data = response.data.logindata;\r\n            console.log(data)\r\n            setdatabymail(data);\r\n            seteditdata({\r\n            'fname': data.fname,\r\n            'lname': data.lname,\r\n            'email': data.email,\r\n            'myimg': ''\r\n            });\r\n        });\r\n    }, [Nav, id]);\r\n\r\n    const Savedata = () => {\r\n        if(!editdata.myimg){\r\n            axios.put(`http://localhost:7416/editdata/${id}`,editdata).then((response)=>{\r\n                alert(response.data.msg)\r\n                window.location.reload()\r\n            })\r\n            // alert(editdata.myimg)\r\n        }else{\r\n            const neweditdata = new FormData()\r\n            neweditdata.append('fname',editdata.fname)\r\n            neweditdata.append('lname',editdata.lname)\r\n            neweditdata.append('email',editdata.email)\r\n            neweditdata.append('myimg',editdata.myimg)\r\n            axios.put(`http://localhost:7416/editdataimg/${id}`,neweditdata).then((response)=>{\r\n                alert(response.data.msg)\r\n                window.location.reload()\r\n            })\r\n            // alert(editdata.myimg)\r\n            // console.log(editdata.myimg)\r\n        }\r\n    };\r\n    const [isSidebarOpen, setIsSidebarOpen] = useState(false);\r\n    const Gotologin = () =>{\r\n        Nav('/logout')\r\n    }\r\n    const toggleSidebar = () => {\r\n        setIsSidebarOpen(!isSidebarOpen);\r\n    }\r\n    return(\r\n        <div>\r\n            <Navigationhome />\r\n            <div style={{paddingTop:'4%'}}>\r\n                <div style={{textAlign:'center'}}>\r\n                    <Link to={'/editprofile'}><button style={{backgroundColor:'red'}} id=\"navbtn\">EDIT PROFILE</button></Link>\r\n                    <Link to={'/changepassword'}><button id=\"navbtn\">CHANGE PASSWORD</button></Link>\r\n                    <Link to={'/deleteaccount'}><button id=\"navbtn\">DELETE ACCOUNT</button></Link>\r\n                </div>\r\n                <div id=\"loginblock\" style={{position:'relative',top:'80px',left:'900px', backgroundColor:' rgb(219, 208, 84)'}}>\r\n                    <div id=\"editimgdiv\">{image ? <img onClick={changeimg} id=\"editimg\" src={URL.createObjectURL(image)} alt=\"profile img\"/> : <img id=\"editimg\" onClick={changeimg} src={`http://localhost:5000/profile/1708077067461_22P35A0384.jpg`} alt=\"profileImg\"/>}</div><br/>\r\n                    <input id=\"loginblock1\" value={editdata.fname} type=\"text\" placeholder=\"Enter Your First Name\" onChange={(e)=>seteditdata({...editdata,fname:e.target.value})}/><br/><br/>\r\n                    <input id=\"loginblock1\" value={editdata.lname} type=\"text\" placeholder=\"Enter Your Last Name\" onChange={(e)=>seteditdata({...editdata,lname:e.target.value})}/><br/><br/>\r\n                    <input id=\"loginblock1\" value={editdata.email} type=\"email\" placeholder=\"Enter Your Mail\" onChange={(e)=>seteditdata({...editdata,email:e.target.value})}/><br/><br/>\r\n                    <input style={{display:'none'}} className=\"fileinput\" type=\"file\" ref={imageref} onChange={(e)=>seteditdata({...editdata,myimg:e.target.files[0]},setimage(e.target.files[0]))}/><br/><br/>\r\n                    <button id=\"loginbutton\" onClick={()=>Savedata()}>SAVE</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Editprofile;"],"mappings":"yRAAA,OAASA,IAAI,CAAEC,WAAW,KAAO,kBAAkB,CACnD,OAASC,SAAS,CAACC,MAAM,CAACC,QAAQ,KAAQ,OAAO,CACjD,MAAOC,MAAK,KAAM,OAAO,CACzB,OAASC,cAAc,KAAQ,mBAAmB,CAAC,wFAEnD,QAASC,YAAW,EAAE,CAClB,GAAMC,mBAAkB,CAAG,QAArBA,mBAAkB,EAAS,CAC7BC,QAAQ,CAACC,aAAa,CAAC,gBAAgB,CAAC,CAACC,KAAK,CAACC,eAAe,CAAG,8CAA8C,CAC/GH,QAAQ,CAACC,aAAa,CAAC,gBAAgB,CAAC,CAACC,KAAK,CAACE,cAAc,CAAG,OAAO,CAC3E,CAAC,CACDL,kBAAkB,EAAE,CACpBN,SAAS,CAAC,UAAI,CACV,GAAG,CAACY,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC,CAC7BC,KAAK,CAAC,2BAA2B,CAAC,CAClCC,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAC,QAAQ,CACjC,CACJ,CAAC,CAAC,EAAE,CAAC,CACL,GAAMC,IAAG,CAAGnB,WAAW,EAAE,CACzB,GAAMoB,GAAE,CAAGP,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CACvC,cAAoCX,QAAQ,CAAC,EAAE,CAAC,wCAAzCkB,UAAU,eAAEC,aAAa,eAChC,GAAMC,SAAQ,CAAGrB,MAAM,CAAC,IAAI,CAAC,CAC7B,eAA0BC,QAAQ,CAAC,EAAE,CAAC,yCAA/BqB,KAAK,eAAEC,QAAQ,eACtB,GAAMC,UAAS,CAAC,QAAVA,UAAS,EAAK,CAChBH,QAAQ,CAACI,OAAO,CAACC,KAAK,EAAE,CAC5B,CAAC,CACD,eAAgCzB,QAAQ,CAAC,CACrC,OAAO,CAAE,EAAE,CACX,OAAO,CAAE,EAAE,CACX,OAAO,CAAE,EAAE,CACX,OAAO,CAAE,EACb,CAAC,CAAC,yCALK0B,QAAQ,eAAEC,WAAW,eAO5B7B,SAAS,CAAC,UAAM,CACZ,GAAMmB,GAAE,CAAGP,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CACxCiB,OAAO,CAACC,GAAG,CAACZ,EAAE,CAAC,CACfhB,KAAK,CAAC6B,GAAG,yCAAkCb,EAAE,EAAG,CAACc,IAAI,CAAC,SAACC,QAAQ,CAAK,CAChE,GAAMC,KAAI,CAAGD,QAAQ,CAACC,IAAI,CAACC,SAAS,CACpCN,OAAO,CAACC,GAAG,CAACI,IAAI,CAAC,CACjBd,aAAa,CAACc,IAAI,CAAC,CACnBN,WAAW,CAAC,CACZ,OAAO,CAAEM,IAAI,CAACE,KAAK,CACnB,OAAO,CAAEF,IAAI,CAACG,KAAK,CACnB,OAAO,CAAEH,IAAI,CAACI,KAAK,CACnB,OAAO,CAAE,EACT,CAAC,CAAC,CACN,CAAC,CAAC,CACN,CAAC,CAAE,CAACrB,GAAG,CAAEC,EAAE,CAAC,CAAC,CAEb,GAAMqB,SAAQ,CAAG,QAAXA,SAAQ,EAAS,CACnB,GAAG,CAACZ,QAAQ,CAACa,KAAK,CAAC,CACftC,KAAK,CAACuC,GAAG,0CAAmCvB,EAAE,EAAGS,QAAQ,CAAC,CAACK,IAAI,CAAC,SAACC,QAAQ,CAAG,CACxEpB,KAAK,CAACoB,QAAQ,CAACC,IAAI,CAACQ,GAAG,CAAC,CACxB5B,MAAM,CAACC,QAAQ,CAAC4B,MAAM,EAAE,CAC5B,CAAC,CAAC,CACF;AACJ,CAAC,IAAI,CACD,GAAMC,YAAW,CAAG,GAAIC,SAAQ,EAAE,CAClCD,WAAW,CAACE,MAAM,CAAC,OAAO,CAACnB,QAAQ,CAACS,KAAK,CAAC,CAC1CQ,WAAW,CAACE,MAAM,CAAC,OAAO,CAACnB,QAAQ,CAACU,KAAK,CAAC,CAC1CO,WAAW,CAACE,MAAM,CAAC,OAAO,CAACnB,QAAQ,CAACW,KAAK,CAAC,CAC1CM,WAAW,CAACE,MAAM,CAAC,OAAO,CAACnB,QAAQ,CAACa,KAAK,CAAC,CAC1CtC,KAAK,CAACuC,GAAG,6CAAsCvB,EAAE,EAAG0B,WAAW,CAAC,CAACZ,IAAI,CAAC,SAACC,QAAQ,CAAG,CAC9EpB,KAAK,CAACoB,QAAQ,CAACC,IAAI,CAACQ,GAAG,CAAC,CACxB5B,MAAM,CAACC,QAAQ,CAAC4B,MAAM,EAAE,CAC5B,CAAC,CAAC,CACF;AACA;AACJ,CACJ,CAAC,CACD,eAA0C1C,QAAQ,CAAC,KAAK,CAAC,yCAAlD8C,aAAa,eAAEC,gBAAgB,eACtC,GAAMC,UAAS,CAAG,QAAZA,UAAS,EAAQ,CACnBhC,GAAG,CAAC,SAAS,CAAC,CAClB,CAAC,CACD,GAAMiC,cAAa,CAAG,QAAhBA,cAAa,EAAS,CACxBF,gBAAgB,CAAC,CAACD,aAAa,CAAC,CACpC,CAAC,CACD,mBACI,oCACI,KAAC,cAAc,IAAG,cAClB,aAAK,KAAK,CAAE,CAACI,UAAU,CAAC,IAAI,CAAE,wBAC1B,aAAK,KAAK,CAAE,CAACC,SAAS,CAAC,QAAQ,CAAE,wBAC7B,KAAC,IAAI,EAAC,EAAE,CAAE,cAAe,uBAAC,eAAQ,KAAK,CAAE,CAACC,eAAe,CAAC,KAAK,CAAE,CAAC,EAAE,CAAC,QAAQ,UAAC,cAAY,EAAS,EAAO,cAC1G,KAAC,IAAI,EAAC,EAAE,CAAE,iBAAkB,uBAAC,eAAQ,EAAE,CAAC,QAAQ,UAAC,iBAAe,EAAS,EAAO,cAChF,KAAC,IAAI,EAAC,EAAE,CAAE,gBAAiB,uBAAC,eAAQ,EAAE,CAAC,QAAQ,UAAC,gBAAc,EAAS,EAAO,GAC5E,cACN,aAAK,EAAE,CAAC,YAAY,CAAC,KAAK,CAAE,CAACC,QAAQ,CAAC,UAAU,CAACC,GAAG,CAAC,MAAM,CAACC,IAAI,CAAC,OAAO,CAAEH,eAAe,CAAC,oBAAoB,CAAE,wBAC5G,YAAK,EAAE,CAAC,YAAY,UAAE/B,KAAK,cAAG,YAAK,OAAO,CAAEE,SAAU,CAAC,EAAE,CAAC,SAAS,CAAC,GAAG,CAAEiC,GAAG,CAACC,eAAe,CAACpC,KAAK,CAAE,CAAC,GAAG,CAAC,aAAa,EAAE,cAAG,YAAK,EAAE,CAAC,SAAS,CAAC,OAAO,CAAEE,SAAU,CAAC,GAAG,6DAA+D,CAAC,GAAG,CAAC,YAAY,EAAE,EAAO,2BAAK,cAClQ,cAAO,EAAE,CAAC,aAAa,CAAC,KAAK,CAAEG,QAAQ,CAACS,KAAM,CAAC,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,uBAAuB,CAAC,QAAQ,CAAE,kBAACuB,CAAC,QAAG/B,YAAW,gCAAKD,QAAQ,MAACS,KAAK,CAACuB,CAAC,CAACC,MAAM,CAACC,KAAK,GAAE,EAAC,EAAE,2BAAK,2BAAK,cAC1K,cAAO,EAAE,CAAC,aAAa,CAAC,KAAK,CAAElC,QAAQ,CAACU,KAAM,CAAC,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,sBAAsB,CAAC,QAAQ,CAAE,kBAACsB,CAAC,QAAG/B,YAAW,gCAAKD,QAAQ,MAACU,KAAK,CAACsB,CAAC,CAACC,MAAM,CAACC,KAAK,GAAE,EAAC,EAAE,2BAAK,2BAAK,cACzK,cAAO,EAAE,CAAC,aAAa,CAAC,KAAK,CAAElC,QAAQ,CAACW,KAAM,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,iBAAiB,CAAC,QAAQ,CAAE,kBAACqB,CAAC,QAAG/B,YAAW,gCAAKD,QAAQ,MAACW,KAAK,CAACqB,CAAC,CAACC,MAAM,CAACC,KAAK,GAAE,EAAC,EAAE,2BAAK,2BAAK,cACrK,cAAO,KAAK,CAAE,CAACC,OAAO,CAAC,MAAM,CAAE,CAAC,SAAS,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAEzC,QAAS,CAAC,QAAQ,CAAE,kBAACsC,CAAC,QAAG/B,YAAW,gCAAKD,QAAQ,MAACa,KAAK,CAACmB,CAAC,CAACC,MAAM,CAACG,KAAK,CAAC,CAAC,CAAC,GAAExC,QAAQ,CAACoC,CAAC,CAACC,MAAM,CAACG,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,EAAC,EAAE,2BAAK,2BAAK,cAC3L,eAAQ,EAAE,CAAC,aAAa,CAAC,OAAO,CAAE,yBAAIxB,SAAQ,EAAE,EAAC,UAAC,MAAI,EAAS,GAC7D,GACJ,GACJ,CAEd,CAEA,cAAenC,YAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}